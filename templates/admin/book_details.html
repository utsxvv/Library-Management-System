{% extends "base.html" %} 

{% block title %}Book Details{% endblock %} 

{% block content %}

<div class="flex-1 ml-0 md:ml-64 main-content-scroll bg-gray-50">
    <header
        class="md:hidden sticky top-0 bg-white shadow-md p-4 flex justify-between items-center z-10"
    >
        <button class="text-gray-600 hover:text-primary">
            <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
            >
                <line x1="3" x2="21" y1="12" y2="12" />
                <line x1="3" x2="21" y1="6" y2="6" />
                <line x1="3" x2="21" y1="18" y2="18" />
            </svg>
        </button>
        <span class="text-lg font-semibold text-gray-900">MyLibrary</span>
        <button class="text-gray-600 hover:text-primary">
            <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
            >
                <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2" />
                <circle cx="12" cy="7" r="4" />
            </svg>
        </button>
    </header>

    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <nav class="text-sm text-gray-500 mb-6" aria-label="Breadcrumb">
            <ol class="list-none p-0 inline-flex">
                <li class="flex items-center">
                    <a
                        href="{% url 'admin_books' %}"
                        class="text-blue-600 hover:text-blue-800 transition duration-150"
                        >Home</a
                    >
                    <svg
                        class="fill-current w-3 h-3 mx-2 text-gray-400"
                        xmlns="http://www.w3.org/2000/svg"
                        viewBox="0 0 20 20"
                    >
                        <path
                            d="M7.293 14.707l3.293-3.293-3.293-3.293a1 1 0 111.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414z"
                        />
                    </svg>
                </li>
                <li class="text-gray-700 font-medium truncate max-w-xs">
                    {{book.title}}
                </li>
            </ol>
        </nav>

        <div class="bg-white rounded-xl shadow-xl p-8 lg:p-12">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-10">
                <div class="lg:col-span-1 flex justify-center">
                    <img
                        src="https://placehold.co/400x600/1F2937/FFFFFF?text={{ book.title|urlencode }}"
                        alt="{{book.title}}"
                        class="w-full max-w-xs h-auto rounded-lg shadow-2xl object-cover"
                    />
                </div>

                <div class="lg:col-span-2">
                    <h1
                        class="text-4xl font-extrabold text-gray-900 mb-2"
                        id="book-title"
                    >
                        {{book.title}}
                    </h1>
                    <p class="text-xl text-gray-600 mb-6" id="book-author">
                        By {{book.author}}
                    </p>

                    <div
                        class="flex flex-col sm:flex-row sm:items-center justify-between border-b border-t border-gray-100 py-6 mb-6 space-y-4 sm:space-y-0 sm:space-x-4"
                    >
                        <div class="flex items-center space-x-4">
                            {% if book.available_copies > 0 %}
                            <span
                                id="availability-status"
                                class="bg-green-100 text-green-700 font-bold px-4 py-2 rounded-full text-base shadow-sm"
                            >
                                Available
                            </span>
                            {% else %}
                            <span
                                id="availability-status"
                                class="bg-red-100 text-red-700 font-bold px-4 py-2 rounded-full text-base shadow-sm"
                            >
                                Unavailable
                            </span>
                            {% endif %}
                            <p class="text-gray-600 font-medium">
                                <span
                                    id="available-copies"
                                    class="font-bold text-gray-800"
                                >
                                    {{book.available_copies}} of {{book.total_copies}}
                                </span>
                                copies available
                            </p>
                        </div>

                        <div class="flex items-center space-x-3">
                            <a
                                href="{% url 'admin_edit_book' book.book_id %}"
                                class="flex items-center gap-2 py-2.5 px-6 text-sm font-semibold bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition duration-150 shadow-md"
                            >
                                Edit
                            </a>

                            <a
                                href="{% url 'admin_delete_book' book.book_id %}"
                                onclick="return confirm('Are you sure you want to delete this book?');"
                                class="flex items-center gap-2 py-2.5 px-6 text-sm font-semibold bg-red-600 text-white rounded-lg hover:bg-red-700 transition duration-150 shadow-md"
                            >
                                Delete
                            </a>
                        </div>
                    </div>


                    <div class="mb-8">
                        <p
                            id="book-description"
                            class="text-base text-gray-800 leading-relaxed"
                        >
                            {{book.description}}
                        </p>
                    </div>

                    <div>
                        <h2
                            class="text-xl font-bold text-gray-900 mb-4 border-b border-gray-100 pb-2"
                        >
                            Details
                        </h2>
                        <div
                            class="grid grid-cols-1 sm:grid-cols-2 gap-y-4 gap-x-8 text-gray-700"
                        >
                            <div class="flex items-center space-x-3">
                                <svg
                                    class="w-6 h-6 text-blue-500 flex-shrink-0"
                                    fill="none"
                                    stroke="currentColor"
                                    viewBox="0 0 24 24"
                                    xmlns="http://www.w3.org/2000/svg"
                                >
                                    <path
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                        stroke-width="2"
                                        d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"
                                    ></path>
                                </svg>
                                <div>
                                    <p class="text-xs font-medium text-gray-500">
                                        Author
                                    </p>
                                    <p
                                        id="detail-author"
                                        class="font-semibold text-gray-900"
                                    >
                                        {{book.author}}
                                    </p>
                                </div>
                            </div>

                            <div class="flex items-center space-x-3">
                                <svg
                                    class="w-6 h-6 text-blue-500 flex-shrink-0"
                                    fill="none"
                                    stroke="currentColor"
                                    viewBox="0 0 24 24"
                                    xmlns="http://www.w3.org/2000/svg"
                                >
                                    <path
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                        stroke-width="2"
                                        d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"
                                    ></path>
                                </svg>
                                <div>
                                    <p class="text-xs font-medium text-gray-500">
                                        ISBN
                                    </p>
                                    <p
                                        id="detail-isbn"
                                        class="font-semibold text-gray-900"
                                    >
                                        {{book.isbn}}
                                    </p>
                                </div>
                            </div>

                            <div class="flex items-center space-x-3">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                width="20"
                                height="20"
                                viewBox="0 0 24 24"
                                fill="none"
                                stroke="currentColor"
                                stroke-width="2"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                class="text-blue-500"
                            >
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M9.568 3H5.25A2.25 2.25 0 0 0 3 5.25v4.318c0 .597.237 1.17.659 1.591l9.581 9.581c.699.699 1.78.872 2.607.33a18.095 18.095 0 0 0 5.223-5.223c.542-.827.369-1.908-.33-2.607L11.16 3.66A2.25 2.25 0 0 0 9.568 3Z" />
                                    <path stroke-linecap="round" stroke-linejoin="round" d="M6 6h.008v.008H6V6Z" />
                                </svg>
                                <div>
                                    <p class="text-xs font-medium text-gray-500">
                                        Genre
                                    </p>
                                    <p
                                        id="detail-published-year"
                                        class="font-semibold text-gray-900"
                                    >
                                        {% for genre in book.genre.all %}
                                            {% if not forloop.first %}, {% endif %}
                                            {{ genre.genre_name }}
                                        {% endfor %}
                                    </p>
                                </div>
                            </div>

                            <div class="flex items-center space-x-3">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                width="20"
                                height="20"
                                viewBox="0 0 24 24"
                                fill="none"
                                stroke="currentColor"
                                stroke-width="2"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                                class="text-blue-500"
                            >
                                    <path
                                        stroke-linecap="round"
                                        stroke-linejoin="round"
                                        d="m10.5 21 5.25-11.25L21 21m-9-3h7.5M3 5.621a48.474 48.474 0 0 1 6-.371m0 0c1.12 0 2.233.038 3.334.114M9 5.25V3m3.334 2.364C11.176 10.658 7.69 15.08 3 17.502m9.334-12.138c.896.061 1.785.147 2.666.257m-4.589 8.495a18.023 18.023 0 0 1-3.827-5.802"
                                    />
                                </svg>
                                <div>
                                    <p class="text-xs font-medium text-gray-500">
                                        Language
                                    </p>
                                    <p
                                        id="detail-publisher"
                                        class="font-semibold text-gray-900"
                                    >
                                        {{book.language}}
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
</div>
{% endblock %}
